// ================================================
// GOOGLE SHEETS SETUP - Label Scanner Integration
// ================================================
// 
// Follow these steps to connect your Label Scanner app to Google Sheets:
//
// STEP 1: Create a Google Sheet
// - Go to https://sheets.google.com
// - Create a new spreadsheet
// - In Row 1, add these headers:
//   Timestamp | Batch | Mfg Date | Expiry Date | Flavour | Godown
//
// STEP 2: Open Apps Script
// - In your Google Sheet, go to Extensions → Apps Script
// - Delete any existing code
// - Copy and paste the entire code below:

// ========== COPY FROM HERE ==========

function doPost(e) {
  try {
    var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
    var data = JSON.parse(e.postData.contents);
    
    sheet.appendRow([
      data.timestamp || new Date().toLocaleString(),
      data.batchNo || '',
      data.mfgDate || '',
      data.expiryDate || '',
      data.flavour || '',
      data.godown || ''
    ]);
    
    return ContentService.createTextOutput(JSON.stringify({
      success: true,
      message: 'Data saved successfully'
    })).setMimeType(ContentService.MimeType.JSON);
    
  } catch (error) {
    return ContentService.createTextOutput(JSON.stringify({
      success: false,
      error: error.toString()
    })).setMimeType(ContentService.MimeType.JSON);
  }
}

function doGet(e) {
  return ContentService.createTextOutput('Label Scanner API is running');
}

// ========== COPY UNTIL HERE ==========

// STEP 3: Deploy as Web App
// - Click the "Deploy" button (top right)
// - Select "New deployment"
// - Click the gear icon → Select "Web app"
// - Settings:
//   - Description: Label Scanner API
//   - Execute as: Me
//   - Who has access: Anyone
// - Click "Deploy"
// - Click "Authorize access" and allow permissions
// - COPY THE WEB APP URL
//
// STEP 4: Add URL to App
// - Open label-scanner2/js/app.js
// - Find this line:
//   SHEETS_URL: '',
// - Paste your URL between the quotes, like:
//   SHEETS_URL: 'https://script.google.com/macros/s/YOUR_ID/exec',
//
// DONE! Now when you tap "Send to Sheets", data will go to your spreadsheet.
